/* style.css - v6.0 - Final Visual Polish, Login Button */

body {
    margin: 0; padding: 0 0 60px 0; /* Padding bottom for footer */
    background-image: url('plain-linen.jpeg'); /* Re-apply linen texture */
    background-attachment: fixed; /* Keep texture fixed */
    background-color: #E1E1E1; /* Fallback color */
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; color: #333;
    -webkit-tap-highlight-color: transparent;
}

header {
    background: linear-gradient(to bottom, #bcc6d1 0%, #a4b0bd 50%, #909dad 51%, #a4b0bd 100%);
    border-bottom: 1px solid #6d6d6d; padding: 10px 15px;
    text-align: center; box-shadow: 0 1px 2px rgba(0,0,0,0.3);
    position: sticky; top: 0; z-index: 10;
    display: flex; justify-content: space-between; /* Space out title and buttons */
    align-items: center; min-height: 45px;
}
header h1 {
    margin: 0; font-size: 20px; color: #ffffff; font-weight: bold;
    text-shadow: 0 -1px 0 rgba(0,0,0,0.5);
    flex-grow: 1; text-align: center;
    /* Adjust padding dynamically if needed, or keep centered */
    /* padding-left: 50px; padding-right: 50px; /* Example if buttons take space */
}
#refresh-btn, #login-btn { /* Style both header buttons */
    background: none; border: none; padding: 5px; cursor: pointer;
    color: rgba(255, 255, 255, 0.8); /* White icons */
    line-height: 0; opacity: 0.8; transition: opacity 0.2s, transform 0.1s;
    width: 30px; /* Fixed width */
    height: 30px; /* Fixed height */
    display: flex; align-items: center; justify-content: center;
}
#refresh-btn:hover, #login-btn:hover { opacity: 1; }
#refresh-btn:active, #login-btn:active { transform: scale(0.9); opacity: 1; }
#refresh-btn svg, #login-btn svg { width: 18px; height: 18px; fill: currentColor; }
#login-btn img { /* Style for Google icon */
    width: 20px; height: 20px; border-radius: 50%;
}
/* User info display */
#user-info {
    font-size: 11px; color: #fff; text-shadow: 0 -1px 0 rgba(0,0,0,0.5);
    margin-right: 5px; /* Space before login/logout */
    display: none; /* Hidden by default */
    align-items: center;
}
#user-info img {
    width: 24px; height: 24px; border-radius: 50%; margin-right: 5px;
    border: 1px solid rgba(255,255,255,0.5);
}


.month-nav {
    display: flex; justify-content: space-between; align-items: center;
    padding: 8px 15px; background-color: #f0f0f0; border-bottom: 1px solid #bbb;
    position: sticky; top: 45px; z-index: 9;
}
#month-name-display {
    font-size: 16px; font-weight: bold; color: #000000; text-align: center; flex-grow: 1;
}
/* --- Aqua Button Style (Revisited) --- */
.aqua-button {
    background: linear-gradient(to bottom, #a7d1ef 0%, #76b6e4 50%, #58a5d9 51%, #4aa2d8 100%);
    border: 1px solid #3c82b1; border-radius: 15px; padding: 6px 12px;
    font-size: 13px; font-weight: bold; color: #fff; cursor: pointer;
    box-shadow: 0 2px 3px rgba(0,0,0,0.2), inset 0 1px 0 rgba(255,255,255,0.4), inset 0 -1px 0 rgba(0,0,0,0.1);
    text-shadow: 0 -1px 0 rgba(0,0,0,0.3); min-width: 40px; transition: all 0.1s ease-in-out;
    text-align: center; /* Ensure text is centered */
    display: inline-block; /* Allow margin/padding */
}
.aqua-button:hover { background: linear-gradient(to bottom, #b8dcf4 0%, #8cc8ec 50%, #6fbde4 51%, #5fb9e2 100%); }
.aqua-button:active { background: linear-gradient(to top, #a7d1ef 0%, #76b6e4 50%, #58a5d9 51%, #4aa2d8 100%); box-shadow: inset 0 2px 3px rgba(0,0,0,0.3); transform: translateY(1px); }
/* Specific overrides for month nav buttons if needed */
.month-nav button.aqua-button { /* Keep these small */
     padding: 4px 10px; font-size: 16px; min-width: 35px; border-radius: 10px;
}

main { padding: 15px; }
.calendario-grid {
    display: grid; grid-template-columns: repeat(7, 1fr);
    gap: 15px; /* Increased gap */
    padding-bottom: 20px;
}
.dia-btn {
    background-color: #fdfdfd; border: 1px solid #ccc; border-radius: 5px;
    padding: 0; text-align: center; cursor: pointer;
    box-shadow: 2px 2px 5px rgba(0,0,0,0.2), inset 0 0 5px rgba(0,0,0,0.05);
    color: #333; height: 0; padding-bottom: 100%; /* Square aspect ratio */
    position: relative; overflow: hidden;
    transition: background-color 0.1s, transform 0.1s;
    display: flex; justify-content: center; align-items: center; /* Center content */
}
.dia-btn:active { background-color: #eee; box-shadow: inset 0 1px 3px rgba(0,0,0,0.15); transform: translateY(1px); }
.dia-numero {
    font-size: 4vw; /* Responsive font size */
    max-font-size: 32px; /* Max size */
    min-font-size: 20px; /* Min size */
    font-weight: bold; color: #444; line-height: 1;
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); /* Precise centering */
    z-index: 1; /* Above stripe */
    background: rgba(255,255,255,0.6); /* Slightly faded background for readability */
    padding: 2px 4px;
    border-radius: 3px;
}
/* Red Stripe */
.dia-btn::before {
    content: ''; position: absolute; top: 0; left: 0; right: 0;
    height: 12px; /* Increased height */
    background-color: #e57373;
    border-bottom: 1px solid #c06161;
}
/* Hole Removed */
.dia-btn::after { display: none; }


/* --- Modales --- */
.modal-preview, .modal-edit, .modal-add-memory {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.4);
    display: none; justify-content: center; align-items: center; z-index: 1000; padding: 20px; box-sizing: border-box;
    opacity: 0; transform: scale(0.9); transition: opacity 0.2s ease-out, transform 0.2s ease-out;
}
.modal-preview.visible, .modal-edit.visible, .modal-add-memory.visible { display: flex; opacity: 1; transform: scale(1); }
.modal-preview-content, .modal-edit .modal-content, .modal-add-memory-content {
    background: #f7f7f7; padding: 0; border-radius: 10px; width: 100%; max-width: 360px; /* Wider */
    box-shadow: 0 5px 15px rgba(0,0,0,0.3); border: 1px solid #888;
    max-height: 90vh; display: flex; flex-direction: column; overflow: hidden;
}

/* --- Modal Preview (Beige Paper) --- */
.modal-preview-content {
    padding: 0;
    background-image: url('beige-paper.jpg');
    background-size: cover; background-position: center;
}
.modal-preview-header {
    display: flex; justify-content: space-between; align-items: center;
    border-bottom: 1px solid rgba(0,0,0,0.1); padding: 10px 15px; margin-bottom: 0;
    background: rgba(255, 255, 255, 0.6); backdrop-filter: blur(2px); -webkit-backdrop-filter: blur(2px);
}
.modal-preview-header h3 { margin: 0; font-size: 16px; font-weight: bold; color: #333; text-align: left; flex-grow: 1; }
#edit-from-preview-btn { background: none; border: none; padding: 5px; cursor: pointer; color: #007aff; line-height: 0; }
#edit-from-preview-btn:hover { color: #0056b3; }
#edit-from-preview-btn svg { width: 20px; height: 20px; }
.modal-preview-memorias { flex-grow: 1; overflow-y: auto; text-align: left; padding: 10px 15px; }
.modal-preview-memorias h4 { margin: 0 0 10px 0; font-size: 14px; color: #555; }
#preview-memorias-list { background: none; border: none; padding: 0; min-height: 30px; }
#preview-memorias-list .memoria-item { background: none; border-bottom-color: rgba(0,0,0,0.1); }
#close-preview-btn { /* Style as main button */
    border-top: 1px solid #ababab; background-color: #f0f0f0; border-radius: 0 0 10px 10px;
    padding: 12px 10px; font-size: 16px; color: #007aff; cursor: pointer; margin: 0;
    width: 100%; text-align: center; font-weight: bold;
}
#close-preview-btn:active { background-color: #d9d9d9; }

/* --- Modal Edición --- */
.modal-edit .modal-content { padding: 0; }
.modal-section { padding: 15px; border-bottom: 1px solid #ccc; }
.modal-section:last-child { border-bottom: none; padding-bottom: 0; }
.modal-edit .modal-content h3 { font-size: 16px; font-weight: bold; margin: 0 0 5px 0; text-align: center;}
.modal-edit .modal-content p { font-size: 13px; margin: 0 0 10px 0; text-align: center; }
.modal-edit .modal-content label { display: block; font-size: 13px; font-weight: bold; margin-top: 10px; margin-bottom: 3px; color: #444; text-align: left;}
.modal-edit .modal-content input[type="text"],
.modal-edit .modal-content input[type="date"],
.modal-edit .modal-content textarea { width: 100%; padding: 8px 10px; margin-bottom: 10px; border: 1px solid #aaa; border-radius: 5px; box-sizing: border-box; font-size: 14px; background-color: #fff; box-shadow: inset 0 1px 2px rgba(0,0,0,0.1); font-family: inherit; }
.modal-edit .modal-content textarea { height: 60px; resize: vertical; }
.modal-section #save-name-btn { display: block; width: 100%; margin-top: 10px; } /* Apply Aqua style via class */
.modal-main-buttons { display: flex; border-top: 1px solid #ababab; background-color: #f0f0f0; }
.modal-main-buttons button { flex: 1; background: transparent; border: none; border-left: 1px solid #ababab; padding: 12px 10px; font-size: 16px; color: #007aff; cursor: pointer; margin: 0; border-radius: 0; box-shadow: none; text-shadow: none; font-weight: bold; }
.modal-main-buttons button:first-child { border-left: none; }
.modal-main-buttons button:active { background-color: #d9d9d9; }
.modal-main-buttons #close-edit-btn { color: #555; font-weight: normal; }
.modal-main-buttons #close-edit-btn:active { color: #007aff; }

/* --- Memory Items (Frame Background) --- */
#edit-memorias-list, #preview-memorias-list { max-height: 150px; overflow-y: auto; margin-bottom: 15px; border: none; background: none; padding: 0; border-radius: 5px; min-height: 30px; }
.memoria-item {
    font-size: 12px; padding: 10px 12px; border-bottom: none; /* Remove bottom border */
    display: flex; justify-content: space-between; align-items: flex-start; /* Align top */
    background-image: url('memory-frame.jpg'); background-size: 100% 100%; /* Stretch frame */
    background-repeat: no-repeat;
    color: #444; text-shadow: none; /* Remove shadow on frame */
    border-radius: 5px; margin: 5px 0; /* Space between items */
    min-height: 60px; /* Ensure frame shows */
    position: relative; /* For absolute positioning inside */
}
.memoria-artwork { /* Style for music/image thumbnails */
    width: 40px; height: 40px; margin-right: 8px; border-radius: 3px; object-fit: cover;
    align-self: center; /* Center vertically */
}
.memoria-item-content {
    flex-grow: 1; margin-right: 10px; background: none; padding: 0; border-radius: 0; /* Remove inner background */
    margin-top: 5px; /* Space from top edge */
    margin-left: 5px; /* Space from left edge */
}
.memoria-item small { display: block; color: #555; margin-bottom: 3px; font-weight: bold; font-size: 10px; }
.memoria-actions {
    position: absolute; /* Position actions top-right */
    top: 5px; right: 5px;
    background: rgba(255,255,255,0.6); /* Slight background for visibility */
    border-radius: 3px; padding: 1px 2px;
}
.memoria-actions button { background: none; border: none; padding: 2px; margin-left: 2px; cursor: pointer; font-size: 14px; color: #555; line-height: 0; opacity: 0.7; transition: opacity 0.2s; }
.memoria-actions button svg { width: 12px; height: 12px; }
.memoria-actions button:hover { opacity: 1; color: #000; }
.delete-btn { color: #d1362b; } .delete-btn:hover { color: #a00; }

#add-memoria-form { margin-top: 10px; }
#add-memoria-btn { /* Green button */
    background: linear-gradient(to bottom, #ABD14B 0%, #7C9F2F 100%); border: 1px solid #637F1D; color: #fff; text-shadow: 0 -1px 0 rgba(0,0,0,0.3); border-radius: 15px; padding: 8px 12px; font-size: 13px; font-weight: bold; cursor: pointer; box-shadow: 0 2px 3px rgba(0,0,0,0.2), inset 0 1px 0 rgba(255,255,255,0.4); display: block; width: 100%; margin-top: 10px; transition: all 0.1s ease-in-out;
}
#add-memoria-btn:hover { background: linear-gradient(to bottom, #BCE45D 0%, #8CAF3F 100%); }
#add-memoria-btn:active { background: linear-gradient(to top, #ABD14B 0%, #7C9F2F 100%); box-shadow: inset 0 2px 3px rgba(0,0,0,0.3); transform: translateY(1px); }
#add-memoria-btn.update-mode { /* Blue when updating */
    background: linear-gradient(to bottom, #a7d1ef 0%, #76b6e4 50%, #58a5d9 51%, #4aa2d8 100%); border-color: #3c82b1;
}
#add-memoria-btn.update-mode:hover { background: linear-gradient(to bottom, #b8dcf4 0%, #8cc8ec 50%, #6fbde4 51%, #5fb9e2 100%);}
#add-memoria-btn.update-mode:active { background: linear-gradient(to top, #a7d1ef 0%, #76b6e4 50%, #58a5d9 51%, #4aa2d8 100%);}

/* Confirmación de Borrado (Adjusted spacing) */
#confirm-delete-dialog {
    position: absolute; background-color: rgba(247, 247, 247, 0.95); border: 1px solid #888;
    border-radius: 8px; padding: 10px 15px; /* Reduced vertical padding */
    box-shadow: 0 3px 8px rgba(0,0,0,0.3); z-index: 1002; text-align: center;
    max-width: 80%; top: 30%; left: 50%; transform: translateX(-50%); display: none;
}
#confirm-delete-dialog p { margin: 0 0 10px 0; /* Only bottom margin */ font-size: 13px; }
#confirm-delete-dialog button {
     margin: 5px 15px 0 15px; /* Top margin + increased side spacing */
     /* Inherits .aqua-button */
}
#confirm-delete-yes { /* Red button */
     background: linear-gradient(to bottom, #ff8a80 0%, #ff5252 100%); border: 1px solid #c62828; color: white; text-shadow: 0 -1px 0 rgba(0,0,0,0.3);
}
#confirm-delete-yes:hover { background: linear-gradient(to bottom, #ff9e9e 0%, #ff6b6b 100%);}
#confirm-delete-yes:active { background: linear-gradient(to top, #ff8a80 0%, #ff5252 100%);}


/* --- Modal Add Memory (Apply Grid Background to Footer) --- */
.modal-add-memory-content {
    background: #f7f7f7; padding: 0; border-radius: 10px; width: 100%; max-width: 360px; /* Wider */
    box-shadow: 0 5px 15px rgba(0,0,0,0.3); border: 1px solid #888;
    max-height: 90vh; display: flex; flex-direction: column; overflow: hidden;
}
.modal-add-memory-content h3 { font-size: 16px; font-weight: bold; margin: 15px 15px 10px 15px; text-align: center;}
.add-memory-form-section { padding: 0 15px 15px 15px; border-bottom: 1px solid #ccc; max-height: 40vh; overflow-y: auto; /* Scrollable section */}
.add-memory-form-section:last-of-type { border-bottom: none; }
.add-memory-form-section label { display: block; font-size: 13px; font-weight: bold; margin-top: 10px; margin-bottom: 3px; color: #444; }
.add-memory-form-section select,
.add-memory-form-section input[type="number"],
.add-memory-form-section input[type="text"],
.add-memory-form-section input[type="url"],
.add-memory-form-section input[type="file"],
.add-memory-form-section textarea { width: 100%; padding: 8px 10px; margin-bottom: 10px; border: 1px solid #aaa; border-radius: 5px; box-sizing: border-box; font-size: 14px; background-color: #fff; box-shadow: inset 0 1px 2px rgba(0,0,0,0.1); font-family: inherit; }
.add-memory-form-section textarea { height: 60px; resize: vertical; }
.add-memory-form-section .placeholder-button,
.add-memory-form-section button.aqua-button { display: block; width: 100%; margin-top: 5px; padding: 8px 10px; }
.placeholder-button { background: #eee; border: 1px solid #ccc; color: #777; font-size: 12px; text-align: center; border-radius: 5px; cursor: not-allowed; }
#add-mem-image-upload { padding: 5px; background-color: #eee; border-radius: 5px; } /* Style file input */
#image-upload-status { font-size: 11px; color: #555; margin-top: 5px; font-style: italic; }

/* iTunes Results */
#itunes-results { max-height: 150px; overflow-y: auto; border: 1px solid #ccc; background: #fff; border-radius: 5px; margin-top: 5px; }
.itunes-track { display: flex; align-items: center; padding: 5px; border-bottom: 1px solid #eee; cursor: pointer; }
.itunes-track:last-child { border-bottom: none; }
.itunes-track:hover { background-color: #f0f8ff; }
.itunes-artwork { /* Class for artwork image */
    width: 40px; height: 40px; margin-right: 8px; border-radius: 3px; object-fit: cover;
    background-color: #eee; /* Placeholder bg if image fails */
}
.itunes-track.no-artwork img { display: none; } /* Hide img if error/no url */
.itunes-track-info { flex-grow: 1; }
.itunes-track-name { font-size: 12px; font-weight: bold; color: #333; }
.itunes-track-artist { font-size: 11px; color: #777; }
.itunes-track-select { font-size: 18px; color: #ccc; margin-left: 5px; }
.itunes-track.selected { background-color: #e6f7ff; } /* Highlight selected */

/* Place Search Results */
#place-results { max-height: 150px; overflow-y: auto; border: 1px solid #ccc; background: #fff; border-radius: 5px; margin-top: 5px; }
.place-result { padding: 8px 10px; border-bottom: 1px solid #eee; cursor: pointer; font-size: 12px; }
.place-result:last-child { border-bottom: none; }
.place-result:hover { background-color: #f0f8ff; }
.place-result.selected { background-color: #e6f7ff; font-weight: bold;} /* Highlight selected */
.place-result small { display: block; font-size: 10px; color: #888; margin-top: 2px; }

/* Button Group at bottom */
.button-group { display: flex; border-top: 1px solid #ababab; background-color: #f0f0f0; border-radius: 0 0 10px 10px; }
.button-group button { flex: 1; background: transparent; border: none; border-left: 1px solid #ababab; padding: 12px 10px; font-size: 16px; color: #007aff; cursor: pointer; margin: 0; border-radius: 0; box-shadow: none; text-shadow: none; font-weight: bold; }
.button-group button:first-child { border-left: none; }
.button-group button:active { background-color: #d9d9d9; }
.button-group #close-add-mem-btn { color: #555; font-weight: normal; }
.button-group #close-add-mem-btn:active { color: #007aff; }

#add-memory-status { font-size: 12px; margin-top: 5px; min-height: 1.2em; text-align: center; padding: 0 15px 5px 15px; }


/* --- Footer Dock (Grid Background) --- */
.footer-dock {
    position: fixed; bottom: 0; left: 0; right: 0; height: 55px;
    background-image: url('grid-texture.jpg');
    background-size: cover; background-position: center;
    border-top: 1px solid rgba(255, 255, 255, 0.1); display: flex;
    justify-content: space-around; align-items: center; padding: 0 10px; z-index: 20;
    box-shadow: 0 -2px 10px rgba(0,0,0,0.3);
}
.dock-button {
    background: none; border: none; color: #fff; text-align: center; cursor: pointer; padding: 0;
    display: flex; flex-direction: column; align-items: center; opacity: 0.9;
    transition: opacity 0.2s, transform 0.1s; flex: 1; /* Distribute space */ max-width: 25%; /* Limit width */
}
.dock-button:hover, .dock-button:active { opacity: 1; transform: scale(1.1); }
.dock-button svg { margin-bottom: 3px; fill: #ffffff; /* Pure white icons */ width: 22px; height: 22px; }
.dock-button span { font-size: 10px; text-shadow: 0 1px 1px rgba(0,0,0,0.7); }

/* --- Search Results Page --- */
#search-results-list { margin-top: 15px; }
.search-result {
    background-image: url('memory-frame.jpg'); background-size: 100% 100%; background-repeat: no-repeat;
    border-radius: 5px; margin-bottom: 8px; padding: 10px 12px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.1); cursor: pointer; transition: transform 0.1s;
    min-height: 50px; /* Ensure frame shows */
}
.search-result:hover { transform: scale(1.02); }
.search-result .memoria-item-content { background: rgba(255, 255, 255, 0.75); padding: 5px 8px; border-radius: 3px; font-size: 12px; color: #333; }
.search-result small { font-weight: bold; display: block; margin-bottom: 4px; color: #555; }

/* Status message general styles */
p.success { color: green; font-weight: bold; }
p.error { color: red; font-weight: bold; }
